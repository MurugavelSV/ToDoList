<html>
    <head>
        <title>ToDoList App</title>
        <script src="https://kit.fontawesome.com/1d71c5906f.js" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="./css/home.css">
    </head>
    <body>
        <div id="app">

            <!-- Outer container -->
            <div id="container">
                <p id="app-title" class="pt-2">TODO App</p>
                <form action="/add/task" method="post">

                    <!-- Container for input fields -->
                    <div id="tasks-input-container">

                        <div class="span2 bt">
                            <p class="field-description fw-b">Description</p>
                            <input type="text" name="task" placeholder="What do you need to do?" id="task-text" class="fw-b">
                        </div>
    
                        <div class="by">
                            <p class="field-description">Category</p>
                            <select name="category" id="category" class="fw-b">
                                <option value="">Choose a category</option>
                                <option value="personal">Personal</option>
                                <option value="work">Work</option>
                                <option value="school">School</option>
                                <option value="cleaning">Cleaning</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
    
                        <div class="bl by">
                            <p class="field-description">Due Date</p>
                            <input type="date" name="dueDate" id="due-date" class="fw-b">
                        </div>
    
                        <div class="span2">
                            <button type="submit" id="submit-button">
                                <p><i class="fa-solid fa-plus"></i>ADD TASK</p>
                            </button>
                            <button type="button" id="task-add-button">
                                <p><a href="/delete/task" class="ib"><i class="fa-solid fa-trash-can"></i>DELETE TASKS</a></p>
                            </button>
                        </div>
    
                    </div>
                </form>

                <!-- Container for displaying the tasks -->
                <div id="task-container">

                    <ul id="task-list">
                        <% for(let i of taskList){ %>
    
                            <li class="bt tasks pt-0-5">
                                <div class="task-checker ib <%= i.completed ? 'task-complete' : '' %>">
                                <a href="/toggle/task/?id=<%= i._id %>&status=<%= i.completed %>">
                                    <div>
                                        <div></div>
                                    </div>
                                </a>
                                </div>
                                
                                <div class="task-description ib pb-1-5">
                                    
                                    <p class="task-name fw-b <%= i.completed ? 'strike-out' : '' %>">
                                        <%= i.task %>
                                    </p>

                                    <div class="category">
                                        <p class="m-0">
                                            <%= i.category.toUpperCase() %>
                                        </p>
                                    </div>
     
                                    <i id="calendar-icon" class="fa-regular fa-calendar-days ib" ></i>
                                    <p class="date-text fw-b <%= i.completed ? 'strike-out' : '' %> ib">
                                        <%= i.dueDate ? `${i.dueDate.toString().slice(4, 10)}, ${i.dueDate.toString().slice(11, 15)}` : "NO DEADLINE" %>
                                    </p>
                                </div>
                            </li>
    
                        <% } %>
                    </ul>
    
                </div>

            </div>

        </div>

        <script src="./js/home.js"></script>

    </body>
</html>